<!-- pages/page-analytics.html -->

<h2>üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>

<div class="analytics-dashboard">
  <!-- –ö–∞—Ä—Ç—ã –º–µ—Ç—Ä–∏–∫ -->
  <div class="metrics-grid">
    <div class="metric-card">
      <div class="metric-value" id="totalItems">0</div>
      <div class="metric-label">–í—Å–µ–≥–æ –∏–∑–¥–µ–ª–∏–π</div>
    </div>
    <div class="metric-card">
      <div class="metric-value" id="totalInspections">0</div>
      <div class="metric-label">–ü—Ä–æ–≤–µ—Ä–æ–∫</div>
    </div>
    <div class="metric-card">
      <div class="metric-value" id="totalNCR">0</div>
      <div class="metric-label">–ê–∫—Ç–æ–≤ NCR</div>
    </div>
    <div class="metric-card">
      <div class="metric-value" id="defectRate">0%</div>
      <div class="metric-label">–£—Ä–æ–≤–µ–Ω—å –±—Ä–∞–∫–∞</div>
    </div>
  </div>

  <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
  <div class="charts-grid">
    <div class="chart-container">
      <h3>üìä –î–∏–Ω–∞–º–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ –º–µ—Å—è—Ü–∞–º</h3>
      <canvas id="qualityTrendChart"></canvas>
    </div>
    
    <div class="chart-container">
      <h3>üîß –¢–∏–ø—ã –¥–µ—Ñ–µ–∫—Ç–æ–≤</h3>
      <canvas id="defectsByTypeChart"></canvas>
    </div>
    
    <div class="chart-container">
      <h3>üè≠ –¢–æ–ø –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π –ø–æ NCR</h3>
      <canvas id="companiesByNCRChart"></canvas>
    </div>
    
    <div class="chart-container">
      <h3>üë∑ –¢–æ–ø –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–æ–≤</h3>
      <canvas id="inspectorsChart"></canvas>
    </div>
  </div>

  <!-- –≠–∫—Å–ø–æ—Ä—Ç -->
  <div class="export-section">
    <h3>üì§ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤</h3>
    <div class="export-buttons">
      <button onclick="exportReport('pdf')" class="export-btn pdf">
        üñ®Ô∏è PDF –û—Ç—á–µ—Ç
      </button>
      <button onclick="exportReport('excel')" class="export-btn excel">
        üìä Excel
      </button>
      <button onclick="exportReport('csv')" class="export-btn csv">
        üíæ CSV
      </button>
    </div>
  </div>
</div>

<style>
.analytics-dashboard {
  position: absolute;
  width: 100%;
  /* max-width: 1200px; */
  margin: 10px;
}

.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 10px;
  margin: 10px 0;
}

.metric-card {
  background: #f8f9fa;
  position: relative;
  left: -10px;
  width: 60%;
  padding: 10px;
  border-radius: 8px;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.metric-value {
  font-size: 2em;
  font-weight: bold;
  color: #007bff;
}

.metric-label {
  color: #666;
  margin-top: 5px;
}

.charts-grid {
  position: relative;
  width: 95%;
  margin-left: 0;
  left: -20px;
  display: flex;
  flex-direction: column;
  background-color: rgba(238, 238, 238, 0);

}

.chart-container {
  position: relative;
  left: 0; margin-left: 0;
  width: 90%;
  background: rgb(255, 255, 255);
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  margin-bottom: 20px;
  
}

.chart-container h3 {
  margin-top: 0;
  color: #333;
}

/* –í–ê–ñ–ù–û: –ó–∞–¥–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã canvas */
.chart-container canvas {
  width: 100% !important;
  height: auto;
  /* height: 300px !important; */
  max-width: 100%;
}


.export-section {
  background: #e9ecef;
  padding: 20px;
  border-radius: 8px;
  margin: 30px 0;
}

.export-buttons {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.export-btn {
  padding: 12px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}

.export-btn.pdf {
  background: #dc3545;
  color: white;
}

.export-btn.excel {
  background: #28a745;
  color: white;
}

.export-btn.csv {
  background: #007bff;
  color: white;
}

.export-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
</style>
