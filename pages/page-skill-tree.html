<!-- pages/page-skill-tree.html -->

<h2>üå≥ –î—Ä–µ–≤–æ —É–º–µ–Ω–∏–π</h2>

<div class="xp-display">
  <div class="xp-bar">
    <div class="xp-fill" style="width: 65%"></div>
    <span class="xp-text">–û—á–∫–∏ –æ–ø—ã—Ç–∞: 1,250 / 2,000</span>
  </div>
  <div class="xp-info">–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å: 750 XP</div>
</div>

<div class="skill-tree-container">
  <!-- –£—Ä–æ–≤–µ–Ω—å 5 (—É–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω–æ–µ) -->
  <div class="skill-row level-5">
    <div class="skill-node locked ultimate" data-skill="super_inspector" data-cost="5000">
      <div class="skill-icon">üöÄ</div>
      <div class="skill-name">–°–£–ü–ï–† –ò–ù–°–ü–ï–ö–¢–û–†</div>
      <div class="skill-desc">–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ + –±–æ–Ω—É—Å—ã</div>
      <div class="skill-cost">5000 XP</div>
    </div>
  </div>

  <!-- –£—Ä–æ–≤–µ–Ω—å 4 -->
  <div class="skill-row level-4">
    <div class="skill-node locked" data-skill="master_quality" data-cost="2500">
      <div class="skill-icon">ü•á</div>
      <div class="skill-name">–ú–∞—Å—Ç–µ—Ä –∫–∞—á–µ—Å—Ç–≤–∞</div>
      <div class="skill-desc">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏</div>
      <div class="skill-cost">2500 XP</div>
    </div>
  </div>

  <!-- –£—Ä–æ–≤–µ–Ω—å 3 -->
  <div class="skill-row level-3">
    <div class="skill-node locked" data-skill="expert_mode" data-cost="1000">
      <div class="skill-icon">üë®‚Äçüîß</div>
      <div class="skill-name">–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º</div>
      <div class="skill-desc">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–æ–ª—è</div>
      <div class="skill-cost">1000 XP</div>
    </div>
    
    <div class="skill-node locked" data-skill="auto_ncr" data-cost="1500">
      <div class="skill-icon">ü§ñ</div>
      <div class="skill-name">–ê–≤—Ç–æ-NCR</div>
      <div class="skill-desc">–ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –±—Ä–∞–∫–µ</div>
      <div class="skill-cost">1500 XP</div>
    </div>
  </div>

  <!-- –£—Ä–æ–≤–µ–Ω—å 2 -->
  <div class="skill-row level-2">
    <div class="skill-node unlocked" data-skill="advanced_inspection">
      <div class="skill-icon">üîç</div>
      <div class="skill-name">–ü—Ä–æ–¥–≤. –ø—Ä–æ–≤–µ—Ä–∫–∞</div>
      <div class="skill-desc">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å–ø–µ–∫—Ü–∏–π</div>
    </div>
    
    <div class="skill-node unlocked" data-skill="ncr_master">
      <div class="skill-icon">üìù</div>
      <div class="skill-name">–ú–∞—Å—Ç–µ—Ä NCR</div>
      <div class="skill-desc">–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–æ–≤</div>
    </div>
    
    <div class="skill-node locked" data-skill="quick_inspection" data-cost="500">
      <div class="skill-icon">‚ö°</div>
      <div class="skill-name">–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</div>
      <div class="skill-desc">–£—Å–∫–æ—Ä–µ–Ω–Ω—ã–π –≤–≤–æ–¥</div>
      <div class="skill-cost">500 XP</div>
    </div>
  </div>

  <!-- –£—Ä–æ–≤–µ–Ω—å 1 (–±–∞–∑–æ–≤—ã–µ) -->
  <div class="skill-row level-1">
    <div class="skill-node unlocked" data-skill="basic_inspection">
      <div class="skill-icon">üîß</div>
      <div class="skill-name">–ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</div>
      <div class="skill-desc">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–¥–µ–ª–∏–π</div>
    </div>
    
    <div class="skill-node unlocked" data-skill="document_check">
      <div class="skill-icon">üìé</div>
      <div class="skill-name">–ö–æ–º–ø–ª–µ–∫—Ç–Ω–æ—Å—Ç—å</div>
      <div class="skill-desc">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</div>
    </div>
  </div>
</div>

<!-- –≠—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É–º–µ–Ω–∏–π -->
<div class="unlocked-bonuses">
  <h3>üåü –ê–∫—Ç–∏–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã:</h3>
  <ul>
    <li>‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –∞–∫—Ç–∏–≤–Ω—ã</li>
    <li>üìé –ö–æ–º–ø–ª–µ–∫—Ç–Ω–æ—Å—Ç—å: –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
    <li>üîß –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –®–∞–±–ª–æ–Ω—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</li>
  </ul>
</div>

<style>
.skill-tree-container {
  margin: 30px 0;
  position: relative;
}

.skill-row {
  display: flex;
  justify-content: center;
  gap: 50px;
  margin: 30px 0;
  position: relative;
}

/* –õ–∏–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è - —Ç–µ–ø–µ—Ä—å —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö */
.skill-row:not(:last-child):after {
  content: '';
  position: absolute;
  bottom: -30px;
  left: 50%;
  width: 2px;
  height: 30px;
  background: #007bff;
}

.skill-node {
  width: 120px;
  padding: 15px;
  border-radius: 10px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  border: 2px solid #ddd;
}

.skill-node.unlocked {
  background: #d4edda;
  border-color: #28a745;
  box-shadow: 0 0 10px rgba(40, 167, 69, 0.3);
}

.skill-node.locked {
  background: #f8f9fa;
  border-color: #6c757d;
  opacity: 0.7;
}

.skill-node.locked:hover {
  opacity: 1;
  background: #e9ecef;
}

.skill-node.ultimate {
  width: 180px;
  background: linear-gradient(45deg, #ffd700, #ffa500);
  border-color: #ff8c00;
  transform: scale(1.1);
}

.skill-icon {
  font-size: 2em;
  margin-bottom: 10px;
}

.skill-name {
  font-weight: bold;
  margin-bottom: 5px;
  color: #333;
}

.skill-desc {
  font-size: 0.8em;
  color: #666;
  margin-bottom: 10px;
}

.skill-cost {
  font-size: 0.7em;
  background: #dc3545;
  color: white;
  padding: 3px 8px;
  border-radius: 10px;
  display: inline-block;
}

.xp-display {
  background: #f8f9fa;
  padding: 15px;
  border-radius: 8px;
  margin: 20px 0;
}

.xp-bar {
  width: 100%;
  height: 25px;
  background: #e9ecef;
  border-radius: 12px;
  overflow: hidden;
  position: relative;
  margin-bottom: 10px;
}

.xp-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #28a745);
  transition: width 0.5s ease;
}

.xp-text {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  text-align: center;
  line-height: 25px;
  color: white;
  font-weight: bold;
  text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
}

.xp-info {
  text-align: center;
  font-size: 0.9em;
  color: #666;
}

.unlocked-bonuses {
  background: #e7f3ff;
  padding: 15px;
  border-radius: 8px;
  border-left: 5px solid #007bff;
}

.unlocked-bonuses ul {
  margin: 10px 0;
  padding-left: 20px;
}

.unlocked-bonuses li {
  margin: 5px 0;
}
</style>

<script>
// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –ø–æ —É–º–µ–Ω–∏—è–º
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.skill-node.locked').forEach(node => {
    node.addEventListener('click', function() {
      const skill = this.dataset.skill;
      const cost = parseInt(this.dataset.cost);
      unlockSkill(skill, cost);
    });
  });
});

function unlockSkill(skillName, cost) {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ XP
  const currentXP = 1250; // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ - –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
  if (currentXP >= cost) {
    if (confirm(`–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —É–º–µ–Ω–∏–µ "${getSkillName(skillName)}" –∑–∞ ${cost} XP?`)) {
      // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É–º–µ–Ω–∏—è
      const node = document.querySelector(`[data-skill="${skillName}"]`);
      node.classList.remove('locked');
      node.classList.add('unlocked');
      node.querySelector('.skill-cost')?.remove();
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç
      applySkillEffect(skillName);
      
      alert(`‚úÖ –£–º–µ–Ω–∏–µ "${getSkillName(skillName)}" —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ!`);
    }
  } else {
    alert(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ XP. –ù—É–∂–Ω–æ –µ—â—ë ${cost - currentXP} –æ—á–∫–æ–≤.`);
  }
}

function getSkillName(skillKey) {
  const names = {
    'quick_inspection': '–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞',
    'expert_mode': '–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º',
    'auto_ncr': '–ê–≤—Ç–æ-NCR',
    'master_quality': '–ú–∞—Å—Ç–µ—Ä –∫–∞—á–µ—Å—Ç–≤–∞',
    'super_inspector': '–°–£–ü–ï–† –ò–ù–°–ü–ï–ö–¢–û–†'
  };
  return names[skillKey] || skillKey;
}

function applySkillEffect(skillName) {
  // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
  console.log(`–ü—Ä–∏–º–µ–Ω—ë–Ω —ç—Ñ—Ñ–µ–∫—Ç —É–º–µ–Ω–∏—è: ${skillName}`);
  
  // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –±–æ–Ω—É—Å–æ–≤
  const bonusesList = document.querySelector('.unlocked-bonuses ul');
  const bonusText = {
    'quick_inspection': '‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –∞–∫—Ç–∏–≤–Ω—ã',
    'expert_mode': 'üë®‚Äçüîß –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã',
    'auto_ncr': 'ü§ñ –ê–≤—Ç–æ-NCR: –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –±—Ä–∞–∫–µ',
    'master_quality': 'ü•á –ú–∞—Å—Ç–µ—Ä –∫–∞—á–µ—Å—Ç–≤–∞: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞'
  };
  
  if (bonusText[skillName]) {
    const li = document.createElement('li');
    li.textContent = bonusText[skillName];
    bonusesList.appendChild(li);
  }
}
</script>