<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LiveHTML</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', monospace;
      background: #1e1e1e;
      color: #f0f0f0;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    /* –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" */
    #toggle-btn {
      position: fixed;
      top: 0px;
      right:0px;
    margin: 5px;
      z-index: 100;
      background: #007acc;
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }
    #toggle-btn2 {
      position: fixed;
      top: 50px;
      right:0px;
    margin: 5px;
      z-index: 100;
      background: #007acc;
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }

    /* –í—ã–¥–≤–∏–∂–Ω–∞—è –ø–∞–Ω–µ–ª—å */
    #editor-panel {
      position: fixed;
      top: 0;
      left: -100%;
      width: 86%;
      max-width: 600px;
      height: 100%;
      background: #1e1e1e;
      border-right: 1px solid #3c3c3c;
      z-index: 90;
      transition: left 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    @media (min-width: 768px) {
      #editor-panel {
        width: 50%;
      }
    }

    #editor-panel.active {
      left: 0;
    }

    #editor-header {
      padding: 12px;
      background: #252526;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #editor-header button {
      background: #555;
      color: white;
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 4px;
      cursor: pointer;
    }

    #code {
      flex: 1;
      padding: 12px;
      background: #1e1e1e;
      color: #d4d4d4;
      font-family: 'Fira Code', monospace;
      font-size: 14px;
      border: none;
      outline: none;
      resize: none;
    }

    #preview {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    #preview iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: white;
    }

    /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ */
    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.4);
      z-index: 80;
      display: none;
    }

    #overlay.active {
      display: block;
    }
  </style>
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Firebase SDK -->


<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Firebase SDK (compat mode) -->
<script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-database-compat.js"></script>

<script>
  // –¢–≤–æ–π Firebase –∫–æ–Ω—Ñ–∏–≥
  const firebaseConfig = {
    apiKey: "AIzaSyCVr3ZztynpNzkeFY3aLKFN777oPunon4o",
    authDomain: "inspector-24f9b.firebaseapp.com",
    databaseURL: "https://inspector-24f9b-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "inspector-24f9b",
    storageBucket: "inspector-24f9b.firebasestorage.app",
    messagingSenderId: "590955045913",
    appId: "1:590955045913:web:164311eb98caeca7643688"
  };

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  firebase.initializeApp(firebaseConfig);

  // –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ Realtime Database
  const db = firebase.database();

  console.log('‚úÖ Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ –æ–±—ã—á–Ω–æ–º HTML!');
</script>

<script>
  // –ó–∞–ø–∏—à–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
db.ref('test').set({
  message: '–ü—Ä–∏–≤–µ—Ç –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ HTML!',
  timestamp: Date.now()
}).then(() => {
  console.log('‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Firebase!');
}).catch(err => {
  console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:', err);
});
</script>

</head>
<body>
  <!-- –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" -->
  
  <button id="toggle-btn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥">üìù</button>
  <button id="toggle-btn2" style="padding: 5px;"><a href="index.html" style="color: inherit; text-decoration: none; display: block; position: absolute; top: 0; left: 0; margin: 10px;">‚Ü©Ô∏è</a></button>
  <!-- –í—ã–¥–≤–∏–∂–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
  <div id="editor-panel">
    <div id="editor-header">
      <strong>HTML-—Ä–µ–¥–∞–∫—Ç–æ—Ä</strong>
      <button id="close-btn">‚úñ</button>
    </div>
    <textarea id="code" spellcheck="false">

    </textarea>
  </div>

  <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ -->
  <div id="overlay"></div>

  <!-- Preview -->
  <div id="preview">
    <iframe id="output" sandbox="allow-same-origin allow-scripts"></iframe>
  </div>

  <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏ -->
<div id="name-input-container" style="
position: fixed;
bottom: 0px;
left: 0px;
background: white;
padding: 5px;
border-radius: 6px;
box-shadow: 0 2px 8px rgba(0,0,0,0.15);
z-index: 200;
font-family: sans-serif;
font-size: 14px;
">
<input 
  type="text" 
  id="username-input" 
  placeholder="–¢–≤–æ—ë –∏–º—è" 
  value="" 
  style="width: 150px; padding: 6px; border: 1px solid #ccc; border-radius: 4px; font-size: 13px;"
/>
</div>

<script>
  const usernameInput = document.getElementById('username-input');
  window.userName = '–ì–æ—Å—Ç—å'; // ‚Üê –≥–ª–æ–±–∞–ª—å–Ω–æ

  const savedName = localStorage.getItem('livehtml_username');
  if (savedName) {
    window.userName = savedName;
    usernameInput.value = savedName;
  }

  usernameInput.addEventListener('input', () => {
    window.userName = usernameInput.value.trim() || '–ì–æ—Å—Ç—å';
    localStorage.setItem('livehtml_username', window.userName);
  });
</script>

  <script>
  const toggleBtn = document.getElementById('toggle-btn');
  const closeBtn = document.getElementById('close-btn');
  const editorPanel = document.getElementById('editor-panel');
  const overlay = document.getElementById('overlay');
  const codeEl = document.getElementById('code');
  const outputEl = document.getElementById('output');

  // üíÖ –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü (–≤–Ω–µ–¥—Ä—è–µ–º –≤–Ω—É—Ç—Ä—å iframe)
  const TABLE_STYLES = `
    <style>
      /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü */
      .pdf-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-size: 14px;
        color: #333;
        background: white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }
      .pdf-table th,
      .pdf-table td {
        border: 1px solid #ccc;
        padding: 10px 12px;
        text-align: left;
        vertical-align: top;
      }
      .pdf-table tbody tr:nth-child(even) {
        background-color: #f9f9f9;
      }
      .pdf-table thead th {
        background-color: #f0f0f0;
        font-weight: 600;
        color: #222;
      }
    </style>
  `;

  function updatePreview() {
    let html = codeEl.value.trim();

    // –ï—Å–ª–∏ –≤ –∫–æ–¥–µ –µ—Å—Ç—å <head> ‚Äî –≤—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ —Ç—É–¥–∞
    if (html.includes('<head>')) {
      html = html.replace('<head>', `<head>\n${TABLE_STYLES}`);
    } 
    // –ò–Ω–∞—á–µ ‚Äî –≤—Å—Ç–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ <body> –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤ –Ω–∞—á–∞–ª–æ
    else if (html.includes('<body>')) {
      html = html.replace('<body>', `<body>\n${TABLE_STYLES}`);
    } 
    else {
      // –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
      html = TABLE_STYLES + html;
    }

    const doc = outputEl.contentDocument || outputEl.contentWindow.document;
    doc.open();
    doc.write(html);
    doc.close();
  }

// === –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ö–û–î–ê –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò ===

const codeRef = db.ref('livehtml/code'); // –ü—É—Ç—å –≤ Firebase –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–∞

// –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∫–æ–¥
codeRef.once('value').then(snapshot => {
  const savedCode = snapshot.val();
  if (savedCode && codeEl.value.trim() === '') {
    codeEl.value = savedCode;
    updatePreview(); // —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ
  }
});

// –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
codeRef.on('value', (snapshot) => {
  const remoteCode = snapshot.val();
  if (remoteCode && codeEl.value !== remoteCode) {
    codeEl.value = remoteCode;
    updatePreview(); // –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–≤—å—é
  }
});

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Firebase (—Å –¥–µ–±–∞—É–Ω—Å–æ–º, —á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å)
let timeoutId;
codeEl.addEventListener('input', () => {
  clearTimeout(timeoutId);
  timeoutId = setTimeout(() => {
    codeRef.set(codeEl.value); // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –±–∞–∑—É
  }, 300); // –∑–∞–¥–µ—Ä–∂–∫–∞ 300–º—Å ‚Äî —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª
});

  function openEditor() {
    editorPanel.classList.add('active');
    overlay.classList.add('active');
    updatePreview();
  }

  function closeEditor() {
    editorPanel.classList.remove('active');
    overlay.classList.remove('active');
  }

  toggleBtn.addEventListener('click', openEditor);
  closeBtn.addEventListener('click', closeEditor);
  overlay.addEventListener('click', closeEditor);
  codeEl.addEventListener('input', updatePreview);

  updatePreview();
</script>


  <script>
    // === –ù–∞—Å—Ç—Ä–æ–π–∫–∞: –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage –∏–ª–∏ prompt ===
    // === –ü–æ–ª—É—á–∞–µ–º –∏–º—è –∏–∑ –ø–æ–ª—è –≤–≤–æ–¥–∞ #username-input ===
// const usernameInput = document.getElementById('username-input');
// let userName = '–ì–æ—Å—Ç—å'; // –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–º—è –∏–∑ localStorage
// const savedName = localStorage.getItem('livehtml_username');
// if (savedName) {
//   userName = savedName;
//   usernameInput.value = savedName;
// }

// –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è –ø—Ä–∏ –≤–≤–æ–¥–µ
// usernameInput.addEventListener('input', () => {
//   const value = usernameInput.value.trim();
//   userName = value || '–ì–æ—Å—Ç—å'; // –µ—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –ì–æ—Å—Ç—å
//   localStorage.setItem('livehtml_username', userName);
// });

// // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π ‚Äî –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å blur, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
// usernameInput.addEventListener('blur', () => {
//   if (!usernameInput.value.trim()) {
//     usernameInput.value = userName;
//   }
// });
    // let userName = localStorage.getItem('livehtml_username') || '';
    
    // if (!userName) {
    //   userName = prompt('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:', '–ì–æ—Å—Ç—å') || '–ì–æ—Å—Ç—å';
    //   localStorage.setItem('livehtml_username', userName);
    // }
  
    // === –°—Å—ã–ª–∫–∞ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Firebase (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ db —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω) ===
    const messagesRef = db.ref('livehtml/messages');
  
    // === –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —á–∞—Ç–∞ ===
    const chatContainer = document.createElement('div');
    chatContainer.id = 'livehtml-chat';
    chatContainer.style.cssText = `
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      max-width: 480px;
      height: 280px;
      border-top: 1px solid #3a3a3a;
      background: #1e1e1e;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      z-index: 9999;
      margin: 0 auto;
      right: 0;
      overflow: hidden;
      border-radius: 12px 12px 0 0;
    `;
  
    // –ó–∞–≥–æ–ª–æ–≤–æ–∫
    const header = document.createElement('div');
    header.style.cssText = `
      padding: 10px 15px;
      background: #2d2d2d;
      font-weight: 600;
      font-size: 15px;
      border-bottom: 1px solid #3a3a3a;
    `;
    header.textContent = '–ß–∞—Ç';
    chatContainer.appendChild(header);
  
    // –û—Å–Ω–æ–≤–Ω–∞—è –∑–æ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    const messagesBox = document.createElement('div');
    messagesBox.id = 'chat-messages';
    messagesBox.style.cssText = `
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      scrollbar-width: thin;
      scrollbar-color: #444 #1e1e1e;
    `;
    messagesBox.style.cssText += `
      &::-webkit-scrollbar { width: 6px; }
      &::-webkit-scrollbar-track { background: #1e1e1e; }
      &::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
    `;
    chatContainer.appendChild(messagesBox);
  
    // –ü–æ–ª–µ –≤–≤–æ–¥–∞
    const inputContainer = document.createElement('div');
    inputContainer.style.cssText = `
      display: flex;
      padding: 8px 10px;
      background: #2d2d2d;
      border-top: 1px solid #3a3a3a;
      gap: 8px;
    `;
  
    const chatInput = document.createElement('input');
    chatInput.type = 'text';
    chatInput.placeholder = '–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ...';
    chatInput.style.cssText = `
      flex: 1;
      padding: 10px 12px;
      border: none;
      border-radius: 20px;
      background: #3c3c3c;
      color: white;
      font-size: 14px;
      outline: none;
    `;
  
    inputContainer.appendChild(chatInput);
    chatContainer.appendChild(inputContainer);
  
    // –î–æ–±–∞–≤–ª—è–µ–º —á–∞—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
    document.body.appendChild(chatContainer);
  
    // === –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è ===
    chatInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        const text = chatInput.value.trim();
        if (text) {
          messagesRef.push({
            text,
            user: window.userName,
            // user: userName,
            timestamp: Date.now(),
            time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
          });
          chatInput.value = '';
        }
      }
    });
  
    // === –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏–π ===
    // === –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏–π ===
messagesRef.limitToLast(50).on('child_added', (snapshot) => {
  const msg = snapshot.val();

  // –ñ–¥—ë–º, –ø–æ–∫–∞ window.userName —Å—Ç–∞–Ω–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–º
  const checkName = setInterval(() => {
    if (!window.userName || window.userName === '–ì–æ—Å—Ç—å') return;

    clearInterval(checkName);

    const isMe = msg.user === window.userName;

    const messageEl = document.createElement('div');
    messageEl.style.cssText = `
      display: flex;
      flex-direction: ${isMe ? 'row-reverse' : 'row'};
      align-items: flex-start;
      gap: 8px;
      max-width: 85%;
      align-self: ${isMe ? 'flex-end' : 'flex-start'};
    `;

    const bubble = document.createElement('div');
    bubble.style.cssText = `
      background: ${isMe ? '#D63077' : '#2ecc71'};
      color: white;
      padding: 8px 12px;
      border-radius: 18px;
      font-size: 14px;
      line-height: 1.4;
    `;
    bubble.textContent = msg.text;

    const timeSpan = document.createElement('span');
    timeSpan.textContent = msg.time;
    timeSpan.style.cssText = `
      font-size: 11px;
      color: #aaa;
      margin-${isMe ? 'left' : 'right'}: 8px;
      align-self: flex-end;
    `;


    const nameSpan = document.createElement('span');
      nameSpan.textContent = msg.user;
      nameSpan.style.cssText = `
        font-size: 12px;
        color: #999;
        font-weight: 500;
        margin-bottom: 2px;
      `;
      messageEl.appendChild(nameSpan);
    // if (!isMe) {

    // }

    messageEl.appendChild(bubble);
    messageEl.appendChild(timeSpan);
    messagesBox.appendChild(messageEl);
    messagesBox.scrollTop = messagesBox.scrollHeight;
  }, 10);
});
    // messagesRef.limitToLast(50).on('child_added', (snapshot) => {
    //   const msg = snapshot.val();
    //   const isMe = msg.user === window.userName;
    //   // const isMe = msg.user === userName;
  
    //   const messageEl = document.createElement('div');
    //   messageEl.style.cssText = `
    //     display: flex;
    //     flex-direction: ${isMe ? 'row-reverse' : 'row'};
    //     align-items: flex-start;
    //     gap: 8px;
    //     max-width: 85%;
    //     align-self: ${isMe ? 'flex-end' : 'flex-start'};
    //   `;
  
    //   // –ü—É–∑—ã—Ä—å —Å–æ–æ–±—â–µ–Ω–∏—è
    //   const bubble = document.createElement('div');
    //   bubble.style.cssText = `
    //     background: ${isMe ? '#D63077' : '#2ecc71'};
    //     color: white;
    //     padding: 8px 12px;
    //     border-radius: 18px;
    //     font-size: 14px;
    //     line-height: 1.4;
    //     word-wrap: break-word;
    //   `;
  
    //   // –¢–µ–∫—Å—Ç
    //   const textNode = document.createTextNode(msg.text);
    //   bubble.appendChild(textNode);
  
    //   // –í—Ä–µ–º—è
    //   const timeSpan = document.createElement('span');
    //   timeSpan.textContent = msg.time;
    //   timeSpan.style.cssText = `
    //     font-size: 11px;
    //     color: #aaa;
    //     margin-${isMe ? 'left' : 'right'}: 8px;
    //     align-self: flex-end;
    //   `;
  
    //   // –ò–º—è (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —è)
    //   const nameSpan = document.createElement('span');
    //   if (!isMe) {
    //     nameSpan.textContent = msg.user;
    //     nameSpan.style.cssText = `
    //       font-size: 12px;
    //       color: #999;
    //       font-weight: 500;
    //       margin-bottom: 2px;
    //     `;
    //     messageEl.appendChild(nameSpan);
    //   }
  
    //   messageEl.appendChild(bubble);
    //   messageEl.appendChild(timeSpan);
  
    //   // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
    //   messagesBox.appendChild(messageEl);
    //   messagesBox.scrollTop = messagesBox.scrollHeight;
    // });

    // === –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —á–∞—Ç–∞ ===
const toggleButton = document.createElement('button');
toggleButton.innerHTML = 'üí¨';
toggleButton.style.cssText = `
  position: fixed;
  bottom: 15px;
  right: 15px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #D63077;
  color: white;
  font-size: 20px;
  border: none;
  outline: none;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  cursor: pointer;
  z-index: 9998;
  display: none; /* –°–Ω–∞—á–∞–ª–∞ —Å–∫—Ä—ã—Ç–∞, –ø–æ–∫–∞ —á–∞—Ç —Å–≤—ë—Ä–Ω—É—Ç */
  align-items: center;
  justify-content: center;
  transition: transform 0.2s, box-shadow 0.2s;
`;

toggleButton.addEventListener('click', () => {
  chatContainer.style.display = 'flex';
  toggleButton.style.display = 'none';
});

// –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫, —á—Ç–æ–±—ã –æ–Ω —Å–ª—É–∂–∏–ª –∫–Ω–æ–ø–∫–æ–π —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
header.style.cursor = 'pointer';
header.addEventListener('click', () => {
  chatContainer.style.display = 'none';
  toggleButton.style.display = 'flex'; // –∏–ª–∏ 'block', –Ω–æ –ª—É—á—à–µ flex –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
});

// –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —á–∞—Ç, –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞
document.body.appendChild(toggleButton);

// –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ: –µ—Å–ª–∏ —á–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤—ë—Ä–Ω—É—Ç ‚Äî –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ localStorage
// –ê –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —á–∞—Ç, –∞ –∫–Ω–æ–ø–∫—É ‚Äî —Å–∫—Ä—ã—Ç–æ–π
toggleButton.style.display = 'none';
  
  </script>

  <script>
    // === 1. –°–æ–∑–¥–∞—ë–º —Å–ª–æ–π –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è ===
    let currentPath = []; // –ë—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ—á–∫–∏ —Ç–µ–∫—É—â–µ–π –ª–∏–Ω–∏–∏
    const myName = localStorage.getItem('livehtml_username') || '–ì–æ—Å—Ç—å'; // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');
const drawingsRef = db.ref('livehtml/drawings');
// –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º canvas –ø–æ–¥ iframe
function resizeCanvas() {
  const previewRect = document.getElementById('preview').getBoundingClientRect();
  canvas.width = previewRect.width;
  canvas.height = previewRect.height;
  canvas.style.cssText = `
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –Ω–µ –º–µ—à–∞–µ—Ç –∫–ª–∏–∫–∞–º */
    z-index: 9997;
  `;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

document.getElementById('preview').appendChild(canvas);

// === 2. –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∏—Å—Ç—å—é ===
// === 2. –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ö–ò–°–¢–û–ô (—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º–∞—è) ===
const toolsPanel = document.createElement('div');
toolsPanel.id = 'drawing-tools';
toolsPanel.style.cssText = `
  position: fixed;
  bottom: 35%;
  right: 0px;
  background: #252526;
  border-radius: 10px;
  padding: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 10px;
  font-family: sans-serif;
  font-size: 14px;
  color: white;
  transform: scale(1);
  transition: opacity 0.2s ease, transform 0.2s ease;
`;

toolsPanel.innerHTML = `
  <div>
    <label>–¶–≤–µ—Ç:</label>
    <input type="color" id="color-picker" value="#ff4d4d" style="margin-left: 8px;">
  </div>
  <div>
    <label>–¢–æ–ª—â–∏–Ω–∞:</label>
    <input type="range" id="line-width" min="1" max="20" value="3" style="width: 100px;">
    <span id="width-display">3px</span>
  </div>
  <button id="toggle-draw-mode" style="
    background: #D63077;
    color: white;
    border: none;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
  ">‚úèÔ∏è –†–∏—Å–æ–≤–∞—Ç—å</button>
  <button id="clear-canvas" style="
    background: #555;
    color: white;
    border: none;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
  ">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
  <button id="close-tools" style="
    background: #3a3a3a;
    color: white;
    border: none;
    padding: 6px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    margin-top: 5px;
  ">‚óÄ –°–≤–µ—Ä–Ω—É—Ç—å</button>
`;

// –î–æ–±–∞–≤–ª—è–µ–º –ø–∞–Ω–µ–ª—å, –Ω–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º
toolsPanel.style.display = 'none';
document.body.appendChild(toolsPanel);
// === –ö–ù–û–ü–ö–ê-–ò–ö–û–ù–ö–ê –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏ ===
const fabButton = document.createElement('button');
fabButton.id = 'drawing-fab';
fabButton.innerHTML = 'üé®';
fabButton.style.cssText = `
  position: fixed;
  bottom: 50%;
  right: 5px;
  transform: translateY(50%);
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #D63077;
  color: white;
  font-size: 24px;
  border: none;
  outline: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  cursor: pointer;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  opacity: 1;
`;

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
document.body.appendChild(fabButton);
// === –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –û–¢–ö–†–´–¢–ò–Ø/–ó–ê–ö–†–´–¢–ò–Ø –ü–ê–ù–ï–õ–ò ===
fabButton.addEventListener('click', () => {
  toolsPanel.style.display = 'flex'; // –∏–ª–∏ 'block', –∑–∞–≤–∏—Å–∏—Ç –æ—Ç flex-direction
  toolsPanel.style.opacity = '0';
  toolsPanel.style.transform = 'scale(0.8)';
  
  // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
  setTimeout(() => {
    toolsPanel.style.opacity = '1';
    toolsPanel.style.transform = 'scale(1)';
  }, 10);

  fabButton.style.display = 'none';
});

// –ö–Ω–æ–ø–∫–∞ "–°–≤–µ—Ä–Ω—É—Ç—å" –≤–Ω—É—Ç—Ä–∏ –ø–∞–Ω–µ–ª–∏
document.getElementById('close-tools').addEventListener('click', () => {
  toolsPanel.style.opacity = '0';
  toolsPanel.style.transform = 'scale(0.8)';
  
  setTimeout(() => {
    toolsPanel.style.display = 'none';
    fabButton.style.display = 'flex'; // –∏–ª–∏ 'block'
  }, 200);
});
// –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
if (localStorage.getItem('drawingToolsOpen') === 'true') {
  toolsPanel.style.display = 'flex';
  fabButton.style.display = 'none';
} else {
  toolsPanel.style.display = 'none';
  fabButton.style.display = 'flex';
}

// –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
fabButton.addEventListener('click', () => {
  toolsPanel.style.display = 'flex';
  fabButton.style.display = 'none';
  localStorage.setItem('drawingToolsOpen', 'true');
});

document.getElementById('close-tools').addEventListener('click', () => {
  toolsPanel.style.display = 'none';
  fabButton.style.display = 'flex';
  localStorage.setItem('drawingToolsOpen', 'false');
});
// const toolsPanel = document.createElement('div');
// toolsPanel.id = 'drawing-tools';
// toolsPanel.style.cssText = `
//   position: fixed;
//   bottom: 80px;
//   right: 20px;
//   background: #252526;
//   border-radius: 10px;
//   padding: 12px;
//   box-shadow: 0 4px 12px rgba(0,0,0,0.3);
//   z-index: 10000;
//   display: flex;
//   flex-direction: column;
//   gap: 10px;
//   font-family: sans-serif;
//   font-size: 14px;
//   color: white;
// `;

// toolsPanel.innerHTML = `
//   <div>
//     <label>–¶–≤–µ—Ç:</label>
//     <input type="color" id="color-picker" value="#ff4d4d" style="margin-left: 8px;">
//   </div>
//   <div>
//     <label>–¢–æ–ª—â–∏–Ω–∞:</label>
//     <input type="range" id="line-width" min="1" max="20" value="3" style="width: 100px;">
//     <span id="width-display">3px</span>
//   </div>
//   <button id="toggle-draw-mode" style="
//     background: #D63077;
//     color: white;
//     border: none;
//     padding: 6px 10px;
//     border-radius: 6px;
//     font-size: 12px;
//     cursor: pointer;
//   ">‚úèÔ∏è –†–∏—Å–æ–≤–∞—Ç—å</button>
//   <button id="clear-canvas" style="
//     background: #555;
//     color: white;
//     border: none;
//     padding: 6px 10px;
//     border-radius: 6px;
//     font-size: 12px;
//     cursor: pointer;
//   ">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
// `;

// document.body.appendChild(toolsPanel);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–ª—â–∏–Ω—ã
const lineWidthInput = document.getElementById('line-width');
const widthDisplay = document.getElementById('width-display');
widthDisplay.textContent = lineWidthInput.value + 'px';
lineWidthInput.addEventListener('input', () => {
  widthDisplay.textContent = lineWidthInput.value + 'px';
});

// === 3. –õ–æ–≥–∏–∫–∞ —Ä–∏—Å–æ–≤–∞–Ω–∏—è ===
let isDrawing = false;
let lastX = 0;
let lastY = 0;
let drawMode = false;

const colorPicker = document.getElementById('color-picker');
const toggleDrawBtn = document.getElementById('toggle-draw-mode');

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
toggleDrawBtn.addEventListener('click', () => {
  drawMode = !drawMode;
  canvas.style.pointerEvents = drawMode ? 'auto' : 'none';
  toggleDrawBtn.textContent = drawMode ? 'üõë –†–∏—Å–æ–≤–∞—Ç—å' : '‚úèÔ∏è –†–∏—Å–æ–≤–∞—Ç—å';
  document.body.style.cursor = drawMode ? 'crosshair' : 'default';
});

// –ù–∞—á–∞–ª–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
canvas.addEventListener('mousedown', (e) => {
  if (!drawMode) return;
  isDrawing = true;
  [lastX, lastY] = [e.offsetX, e.offsetY];
});

function pushPoint(x, y) {
  currentPath.push({
    x, y,
    color: colorPicker.value,
    width: lineWidthInput.value
  });
}

canvas.addEventListener('mousemove', (e) => {
  if (!isDrawing) return;

  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;

  // –†–∏—Å—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
  ctx.beginPath();
  ctx.moveTo(lastX, lastY);
  ctx.lineTo(x, y);
  ctx.strokeStyle = colorPicker.value;
  ctx.lineWidth = lineWidthInput.value;
  ctx.lineCap = 'round';
  ctx.stroke();

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é —Ç–æ—á–∫—É –≤ –±—É—Ñ–µ—Ä
  pushPoint(lastX, lastY);

  [lastX, lastY] = [x, y];
});

// canvas.addEventListener('mousemove', (e) => {
//   if (!isDrawing) return;
//   ctx.beginPath();
//   ctx.moveTo(lastX, lastY);
//   ctx.lineTo(e.offsetX, e.offsetY);
//   ctx.strokeStyle = colorPicker.value;
//   ctx.lineWidth = lineWidthInput.value;
//   ctx.lineCap = 'round';
//   ctx.stroke();
//   [lastX, lastY] = [e.offsetX, e.offsetY];
// });

canvas.addEventListener('mouseup', () => {
  if (currentPath.length > 1) {
    drawingsRef.push({
      points: currentPath,
      // user: myName,
      timestamp: Date.now()
    });
    currentPath = []; // –û—á–∏—â–∞–µ–º –±—É—Ñ–µ—Ä
  }
  isDrawing = false;
});
// canvas.addEventListener('mouseup', () => {
//   isDrawing = false;
// });
canvas.addEventListener('mouseout', () => {
  isDrawing = false;
});

document.getElementById('clear-canvas').addEventListener('click', () => {
  // if (confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏? –≠—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–µ—Ö.')) {

  // }
  db.ref('livehtml/drawings').remove() // ‚Üê —ç—Ç–æ —É–¥–∞–ª–∏—Ç –≤–µ—Å—å —É–∑–µ–ª
      .catch(err => {
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏');
        console.error(err);
      });
});
// === –°–õ–£–®–ê–ï–ú –í–°–Å: –Ω–æ–≤—ã–µ –ª–∏–Ω–∏–∏ –ò –ø–æ–ª–Ω—É—é –æ—á–∏—Å—Ç–∫—É ===
drawingsRef.on('value', (snapshot) => {
  const data = snapshot.val();

  // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—É—Å—Ç—ã–µ ‚Äî –æ—á–∏—â–∞–µ–º —Ö–æ–ª—Å—Ç
  if (!data) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    return;
  }

  // –ò–Ω–∞—á–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –≤—Å–µ –ø—É—Ç–∏
  ctx.clearRect(0, 0, canvas.width, canvas.height); // —Å–Ω–∞—á–∞–ª–∞ —á–∏—Å—Ç–∏–º
  Object.values(data).forEach(stroke => {
    const points = stroke.points;
    if (!points || points.length < 2) return;

    const first = points[0];
    ctx.beginPath();
    ctx.moveTo(first.x, first.y);

    for (let i = 1; i < points.length; i++) {
      ctx.lineTo(points[i].x, points[i].y);
    }

    ctx.strokeStyle = first.color;
    ctx.lineWidth = first.width;
    ctx.lineCap = 'round';
    ctx.stroke();
  });
});

// drawingsRef.on('child_added', (snapshot) => {
  
//   const data = snapshot.val();
  
//   const points = data.points;

//   if (!points || points.length < 2) return;

//   const first = points[0];
//   ctx.beginPath();
//   ctx.moveTo(first.x, first.y);

//   for (let i = 1; i < points.length; i++) {
//     ctx.lineTo(points[i].x, points[i].y);
//   }

//   ctx.strokeStyle = first.color;
//   ctx.lineWidth = first.width;
//   ctx.lineCap = 'round';
//   ctx.stroke();
// });

// drawingsRef.once('value').then(snapshot => {
//   snapshot.forEach(childSnapshot => {
//     const data = childSnapshot.val();
//     const points = data.points;
//     if (!points || points.length < 2) return;

//     const first = points[0];
//     ctx.beginPath();
//     ctx.moveTo(first.x, first.y);
//     for (let i = 1; i < points.length; i++) {
//       ctx.lineTo(points[i].x, points[i].y);
//     }
//     ctx.strokeStyle = first.color;
//     ctx.lineWidth = first.width;
//     ctx.lineCap = 'round';
//     ctx.stroke();
//   });
// });
 
// === –ö–ù–û–ü–ö–ê: –û–ß–ò–°–¢–ò–¢–¨ –ß–ê–¢ (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è) ===
const clearChatBtn = document.createElement('button');
clearChatBtn.textContent = 'üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç';
clearChatBtn.style.cssText = `
position: fixed;
  bottom: 10px;           /* –æ—Ç—Å—Ç—É–ø –æ—Ç –Ω–∏–∂–Ω–µ–≥–æ –∫—Ä–∞—è */
  left: 55%;              /* –ø–æ–∑–∏—Ü–∏—è —Å–ª–µ–≤–∞ ‚Äî –ø–æ–ª–æ–≤–∏–Ω–∞ —à–∏—Ä–∏–Ω—ã */
  transform: translateX(-50%); /* —Å–¥–≤–∏–≥ –≤–ª–µ–≤–æ –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É —Å–≤–æ–µ–π —à–∏—Ä–∏–Ω—ã */
  z-index: 9996;          /* –Ω–∏–∂–µ —á–∞—Ç–∞, –Ω–æ –≤—ã—à–µ —Ñ–æ–Ω–∞ */

  background: #3a3a3a;
  color: #fff;
  border: none;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  transition: all 0.2s ease;

  /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞, –Ω–æ –≥–∏–±–∫–∞—è */
  min-width: 180px;
  white-space: nowrap;
`;

clearChatBtn.addEventListener('click', () => {
  if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –ø–µ—Ä–µ–ø–∏—Å–∫—É? –≠—Ç–æ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
    db.ref('livehtml/messages').remove()
      .then(() => {
        // ‚úÖ –û—á–∏—â–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞
        const messagesBox = document.getElementById('chat-messages');
        if (messagesBox) {
          messagesBox.innerHTML = ''; // –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —ç–∫—Ä–∞–Ω–∞
        }
        console.log('‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∫–∞ –æ—á–∏—â–µ–Ω–∞ –∏ —Å–∫—Ä—ã—Ç–∞');
      })
      .catch(err => {
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ —á–∞—Ç–∞:', err);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç.');
      });
  }
});

document.body.appendChild(clearChatBtn);


// // === –ö–ù–û–ü–ö–ê: –û–ß–ò–°–¢–ò–¢–¨ –í–°–ï –†–ò–°–£–ù–ö–ò ===
// const clearDrawingsBtn = document.createElement('button');
// clearDrawingsBtn.textContent = 'üé® –û—á–∏—Å—Ç–∏—Ç—å —Ä–∏—Å—É–Ω–∫–∏';
// clearDrawingsBtn.style.cssText = `
//   position: fixed;
//   bottom: 105px;  /* —á—É—Ç—å –≤—ã—à–µ –∫–Ω–æ–ø–∫–∏ "–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç" */
//   right: 20px;
//   z-index: 10000;
//   background: #555;
//   color: white;
//   border: none;
//   padding: 8px 12px;
//   border-radius: 6px;
//   font-size: 13px;
//   cursor: pointer;
//   box-shadow: 0 2px 6px rgba(0,0,0,0.2);
//   transition: background 0.2s;
// `;

// clearDrawingsBtn.addEventListener('click', () => {
//   if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–∞—Ä–∏—Å–æ–≤–∞–Ω–Ω–æ–µ? –≠—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.')) {
//     db.ref('livehtml/drawings').remove()
//       .then(() => {
//         // –û—á–∏—â–∞–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
//         const ctx = canvas.getContext('2d');
//         ctx.clearRect(0, 0, canvas.width, canvas.height);
//         console.log('‚úÖ –í—Å–µ —Ä–∏—Å—É–Ω–∫–∏ —É–¥–∞–ª–µ–Ω—ã');
//       })
//       .catch(err => {
//         console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–∏—Å—É–Ω–∫–æ–≤:', err);
//         alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—á–∏—Å—Ç–∏—Ç—å —Ä–∏—Å—É–Ω–∫–∏.');
//       });
//   }
// });

// document.body.appendChild(clearDrawingsBtn);
  </script>

</body>
</html>
